<?php/** * @Locations * @return html * */ if ( ! function_exists( 'cs_pb_locations' ) ) {	function cs_pb_locations($die = 0){		global $cs_node, $post;		$shortcode_element = '';		$filter_element = 'filterdrag';		$shortcode_view = '';		$output = array();		$counter = $_POST['counter'];		$cs_counter = $_POST['counter'];		if ( isset($_POST['action']) && !isset($_POST['shortcode_element_id']) ) {			$POSTID = '';			$shortcode_element_id = '';		} else {			$POSTID = $_POST['POSTID'];			$shortcode_element_id = $_POST['shortcode_element_id'];			$shortcode_str = stripslashes ($shortcode_element_id);			$PREFIX = 'cs_locations';			$parseObject 	= new ShortcodeParse();			$output = $parseObject->cs_shortcodes( $output, $shortcode_str , true , $PREFIX );		}				$defaults = array('column_size' => '1/1','section_title'=>'','cs_vehicle_location_style'=>'','view'=>'','vehicle_type'=>'','order'=>'DESC','orderby'=>'ID','excerpt'=>'255','locations_pagination'=>'pagination','pagination'=>'10','filterable'=>'yes');			if(isset($output['0']['atts']))				$atts = $output['0']['atts'];			else 				$atts = array();			$locations_element_size = '50';			foreach($defaults as $key=>$values){				if(isset($atts[$key]))					$$key = $atts[$key];				else 					$$key = $values;			 }			$name = 'cs_pb_locations';			$coloumn_class = 'column_'.$locations_element_size;		if(isset($_POST['shortcode_element']) && $_POST['shortcode_element'] == 'shortcode'){			$shortcode_element = 'shortcode_element_class';			$shortcode_view = 'cs-pbwp-shortcode';			$filter_element = 'ajax-drag';			$coloumn_class = '';		}	?>    <div id="<?php echo esc_attr( $name.$cs_counter );?>_del" class="column  parentdelete <?php echo esc_attr( $coloumn_class );?> <?php echo esc_attr( $shortcode_view );?>" item="locations" data="<?php echo element_size_data_array_index($locations_element_size)?>">      <?php cs_element_setting($name,$cs_counter,$locations_element_size);?>      <div class="cs-wrapp-class-<?php echo intval( $cs_counter );?> <?php echo esc_attr( $shortcode_element );?>" id="<?php echo esc_attr( $name.$cs_counter );?>" data-shortcode-template="[cs_locations {{attributes}}]"  style="display: none;">        <div class="cs-heading-area">          <h5><?php _e('Edit Locations Options', 'rental') ?></h5>          <a href="javascript:cs_remove_overlay('<?php echo esc_attr($name.$cs_counter)?>','<?php echo esc_attr($filter_element);?>')" class="cs-btnclose"><i class="fa fa-times"></i></a> </div>        <div class="cs-pbwp-content">          <div class="cs-wrapp-clone cs-shortcode-wrapp">            <?php             if(isset($_POST['shortcode_element']) && $_POST['shortcode_element'] == 'shortcode'){cs_shortcode_element_size();}?>            <ul class="form-elements">                <li class="to-label"><label><?php _e('Section Title', 'rental') ?></label></li>                <li class="to-field">                    <input  name="section_title[]" type="text"  value="<?php echo esc_attr( $section_title );?>"   />                </li>                               </ul>                 <ul class='form-elements'>              <li class='to-label'>                <label><?php _e('Style','rental');?></label>              </li>              <li class='to-field'>                <div class='input-sec select-style'>                  <select name='cs_vehicle_location_style[]' class='dropdown'>                    <option value='default' <?php if($cs_vehicle_location_style == 'default'){echo 'selected';}?>><?php _e('default','rental');?></option>                    <option value='listing' <?php if($cs_vehicle_location_style == 'listing'){echo 'selected';}?>><?php _e('Style','rental');?></option>                  </select>                </div>                <div class='left-info'>                  <p><?php _e('choose a style type for accordion element','rental');?></p>                </div>              </li>            </ul>              <ul class="form-elements">                <li class="to-label">                  <label><?php _e('Post Order', 'rental') ?></label>                </li>                <li class="to-field">                  <div class="input-sec">                    <div class="select-style">                      <select name="order[]" class="dropdown" >                        <option <?php if($order=="ASC")echo "selected";?> value="ASC"><?php _e('Asc', 'rental') ?></option>                        <option <?php if($order=="DESC")echo "selected";?> value="DESC"><?php _e('DESC', 'rental') ?></option>                      </select>                    </div>                  </div>                </li>              </ul>            <ul class="form-elements">              <li class="to-label">                <label><?php _e('Pagination', 'rental') ?></label>              </li>              <li class="to-field select-style">                <select name="locations_pagination[]" class="dropdown">                  <option <?php if($locations_pagination=="pagination")echo "selected";?> value="pagination"><?php _e('Pagination', 'rental') ?></option>                  <option <?php if($locations_pagination=="single_page")echo "selected";?> value="single_page" ><?php _e('Single Page', 'rental') ?></option>                </select>              </li>            </ul>            <ul class="form-elements">              <li class="to-label">                <label><?php _e('No. of Post Per Page', 'rental') ?></label>              </li>              <li class="to-field">                <div class="input-sec">                  <input type="text" name="pagination[]" class="txtfield" value="<?php echo esc_attr( $pagination ); ?>" />                </div>                <div class="left-info">                  <p><?php _e('To display all the records, leave this field blank', 'rental') ?></p>                </div>              </li>            </ul>            <?php if(isset($_POST['shortcode_element']) && $_POST['shortcode_element'] == 'shortcode'){?>            <ul class="form-elements insert-bg">              <li class="to-field"> <a class="insert-btn cs-main-btn" onclick="javascript:Shortcode_tab_insert_editor('<?php echo esc_js( str_replace( 'cs_pb_','',$name ) );?>','<?php echo esc_js( $name.$cs_counter );?>','<?php echo esc_js( $filter_element );?>')" ><?php _e('Insert', 'rental') ?></a> </li>            </ul>            <div id="results-shortocde"></div>            <?php } else {?>            <ul class="form-elements">              <li class="to-label"></li>              <li class="to-field">                <input type="hidden" name="cs_orderby[]" value="locations" />                <input type="button" value="Save" style="margin-right:10px;" onclick="javascript:_removerlay(jQuery(this))" />              </li>            </ul>            <?php }?>          </div>        </div>      </div>    </div><?php		if ( $die <> 1 ) die();	}	add_action('wp_ajax_cs_pb_locations', 'cs_pb_locations');}